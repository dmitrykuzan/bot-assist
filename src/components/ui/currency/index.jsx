import { useRef, useState } from "react";
import { useOnClickOutside } from "@hooks";

export const Currency = (props) => {
  //Props
  const { options, initialValue } = props;

  // State Currency
  const [active, setActive] = useState(false);
  const toggleCurrency = () => setActive(!active);

  // Selected Option
  const [selectedOption, setSelectedOption] = useState(initialValue);

  const handleOptionClick = (option) => {
    setSelectedOption(option);
    setActive(false);
  };

  // Click Outside
  const ref = useRef();
  useOnClickOutside(ref, () => setActive(false));

  return (
    <div className="currency stack column" ref={ref}>
      <div className={`currency__container ${active ? "active" : ""}`}>
        <button
          className="currency__selected stack align-center"
          onClick={toggleCurrency}
        >
          <span className="currency__icon">
            <svg
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_56647_1566)">
                <path
                  d="M4.85318 17.7045L4.85334 17.7043C4.85329 17.7044 4.85323 17.7045 4.85318 17.7045Z"
                  fill="#2B2B2B"
                  stroke="#474747"
                />
                <mask fill="white">
                  <path d="M13.0199 3.58235C13.0862 3.64859 13.173 3.6817 13.2598 3.6817C13.3466 3.6817 13.4334 3.64859 13.4997 3.58235C13.6322 3.44988 13.6322 3.23508 13.4997 3.10257L12.612 2.21495H14.8662C15.4494 2.21495 15.9239 2.68942 15.9239 3.27259V6.34578C15.9239 6.53313 16.0758 6.68504 16.2631 6.68504C16.4505 6.68504 16.6024 6.53316 16.6024 6.34578V3.27263C16.6024 2.80888 16.4218 2.37291 16.0939 2.045C15.766 1.7171 15.3299 1.5365 14.8662 1.5365H12.6121L13.4997 0.648876C13.6322 0.516407 13.6322 0.301602 13.4997 0.169098C13.3672 0.0365935 13.1524 0.0366286 13.02 0.169098L11.5532 1.63585C11.4896 1.69949 11.4539 1.78576 11.4539 1.87573C11.4539 1.96569 11.4896 2.052 11.5532 2.1156L13.0199 3.58235Z" />
                </mask>
                <path
                  d="M13.0199 3.58235C13.0862 3.64859 13.173 3.6817 13.2598 3.6817C13.3466 3.6817 13.4334 3.64859 13.4997 3.58235C13.6322 3.44988 13.6322 3.23508 13.4997 3.10257L12.612 2.21495H14.8662C15.4494 2.21495 15.9239 2.68942 15.9239 3.27259V6.34578C15.9239 6.53313 16.0758 6.68504 16.2631 6.68504C16.4505 6.68504 16.6024 6.53316 16.6024 6.34578V3.27263C16.6024 2.80888 16.4218 2.37291 16.0939 2.045C15.766 1.7171 15.3299 1.5365 14.8662 1.5365H12.6121L13.4997 0.648876C13.6322 0.516407 13.6322 0.301602 13.4997 0.169098C13.3672 0.0365935 13.1524 0.0366286 13.02 0.169098L11.5532 1.63585C11.4896 1.69949 11.4539 1.78576 11.4539 1.87573C11.4539 1.96569 11.4896 2.052 11.5532 2.1156L13.0199 3.58235Z"
                  fill="#2B2B2B"
                />
                <path
                  d="M13.0199 3.58235L12.3128 4.28945L12.3128 4.28946L13.0199 3.58235ZM13.4997 3.58235L12.7927 2.87515L12.7926 2.87525L13.4997 3.58235ZM13.4997 3.10257L12.7926 3.80968L12.7926 3.80968L13.4997 3.10257ZM12.612 2.21495V1.21495H10.1978L11.9049 2.92206L12.612 2.21495ZM16.6024 6.34578H15.6024V6.34597L16.6024 6.34578ZM12.6121 1.5365L11.905 0.829395L10.1979 2.5365H12.6121V1.5365ZM13.4997 0.648876L12.7926 -0.0582312L12.7926 -0.058231L13.4997 0.648876ZM13.4997 0.169098L12.7925 0.87611L12.7926 0.876204L13.4997 0.169098ZM13.02 0.169098L13.7271 0.876204V0.876204L13.02 0.169098ZM11.5532 1.63585L10.8461 0.928747L10.8461 0.928747L11.5532 1.63585ZM11.5532 2.1156L12.2603 1.4085L12.2603 1.40849L11.5532 2.1156ZM12.3128 4.28946C12.5742 4.5508 12.9187 4.6817 13.2598 4.6817V2.6817C13.4273 2.6817 13.5982 2.74637 13.727 2.87525L12.3128 4.28946ZM13.2598 4.6817C13.6009 4.6817 13.9454 4.5508 14.2068 4.28946L12.7926 2.87525C12.9214 2.74637 13.0923 2.6817 13.2598 2.6817V4.6817ZM14.2067 4.28955C14.7299 3.76649 14.7298 2.91844 14.2068 2.39547L12.7926 3.80968C12.5346 3.55171 12.5345 3.13328 12.7927 2.87515L14.2067 4.28955ZM14.2068 2.39547L13.3192 1.50784L11.9049 2.92206L12.7926 3.80968L14.2068 2.39547ZM12.612 3.21495H14.8662V1.21495H12.612V3.21495ZM14.8662 3.21495C14.8811 3.21495 14.8944 3.2199 14.9066 3.23218C14.9189 3.24446 14.9239 3.25773 14.9239 3.27259H16.9239C16.9239 2.13715 16.0017 1.21495 14.8662 1.21495V3.21495ZM14.9239 3.27259V6.34578H16.9239V3.27259H14.9239ZM14.9239 6.34578C14.9239 7.08534 15.5234 7.68504 16.2631 7.68504V5.68504C16.6281 5.68504 16.9239 5.98091 16.9239 6.34578H14.9239ZM16.2631 7.68504C17.0028 7.68504 17.6025 7.08545 17.6024 6.34559L15.6024 6.34597C15.6023 5.98088 15.8983 5.68504 16.2631 5.68504V7.68504ZM17.6024 6.34578V3.27263H15.6024V6.34578H17.6024ZM17.6024 3.27263C17.6024 2.54365 17.3164 1.85333 16.801 1.3379L15.3867 2.75211C15.5271 2.89248 15.6024 3.07411 15.6024 3.27263H17.6024ZM16.801 1.3379C16.2855 0.822457 15.5952 0.536502 14.8662 0.536502V2.5365C15.0647 2.5365 15.2464 2.61174 15.3867 2.75211L16.801 1.3379ZM14.8662 0.536502H12.6121V2.5365H14.8662V0.536502ZM13.3192 2.24361L14.2068 1.35598L12.7926 -0.058231L11.905 0.829395L13.3192 2.24361ZM14.2068 1.35598C14.7297 0.833057 14.7299 -0.0149133 14.2068 -0.538009L12.7926 0.876204C12.5345 0.618117 12.5346 0.199757 12.7926 -0.0582312L14.2068 1.35598ZM14.2069 -0.537915C13.6838 -1.06119 12.8357 -1.06088 12.3129 -0.538009L13.7271 0.876204C13.4691 1.13414 13.0507 1.13438 12.7925 0.87611L14.2069 -0.537915ZM12.3129 -0.538009L10.8461 0.928747L12.2603 2.34296L13.7271 0.876204L12.3129 -0.538009ZM10.8461 0.928747C10.5949 1.17998 10.4539 1.52063 10.4539 1.87573H12.4539C12.4539 2.05089 12.3843 2.21899 12.2603 2.34296L10.8461 0.928747ZM10.4539 1.87573C10.4539 2.23089 10.595 2.57156 10.8461 2.8227L12.2603 1.40849C12.3843 1.53244 12.4539 1.70049 12.4539 1.87573H10.4539ZM10.8461 2.8227L12.3128 4.28945L13.727 2.87525L12.2603 1.4085L10.8461 2.8227Z"
                  fill="#474747"
                />
                <path
                  d="M12.6327 9.07979H12.4132V8.58093C12.4132 8.39358 12.2613 8.24167 12.0739 8.24167C11.8865 8.24167 11.7347 8.39354 11.7347 8.58093V9.07979H11.5152C11.126 9.07979 10.7602 9.23132 10.4851 9.50649C10.2099 9.78162 10.0584 10.1475 10.0584 10.5366V10.9556C10.0584 11.3447 10.2099 11.7106 10.4851 11.9857C10.7602 12.2608 11.126 12.4124 11.5152 12.4124H12.6327C13.0618 12.4124 13.411 12.7615 13.411 13.1907V13.6097C13.411 14.0389 13.0618 14.388 12.6327 14.388H11.5152C11.086 14.388 10.7369 14.0388 10.7369 13.6097V13.3303C10.7369 13.143 10.585 12.9911 10.3976 12.9911C10.2102 12.9911 10.0583 13.143 10.0583 13.3303V13.6097C10.0583 13.9988 10.2099 14.3647 10.485 14.6398C10.7602 14.9149 11.126 15.0665 11.5151 15.0665H11.7346V15.5654C11.7346 15.7527 11.8865 15.9046 12.0739 15.9046C12.2613 15.9046 12.4132 15.7527 12.4132 15.5654V15.0665H12.6327C13.0218 15.0665 13.3876 14.9149 13.6627 14.6398C13.9379 14.3647 14.0894 13.9988 14.0894 13.6097V13.1907C14.0894 12.8015 13.9379 12.4357 13.6627 12.1606C13.3876 11.8854 13.0218 11.7339 12.6327 11.7339H11.5152C11.086 11.7339 10.7369 11.3847 10.7369 10.9556V10.5366C10.7369 10.1074 11.086 9.75828 11.5152 9.75828H12.6327C13.0618 9.75828 13.411 10.1074 13.411 10.5366V10.816C13.411 11.0033 13.5628 11.1552 13.7502 11.1552C13.9376 11.1552 14.0895 11.0033 14.0895 10.816V10.5366C14.0895 10.1475 13.938 9.78162 13.6628 9.50649C13.3877 9.23132 13.0218 9.07979 12.6327 9.07979Z"
                  fill="#2B2B2B"
                />
                <path
                  d="M17.5342 9.76609C17.2357 9.06029 16.8084 8.42649 16.2642 7.88228C15.72 7.33809 15.0862 6.91077 14.3804 6.61225C13.6495 6.30309 12.8733 6.14636 12.0733 6.14636C11.2733 6.14636 10.4971 6.30312 9.76621 6.61225C9.06041 6.91077 8.42662 7.33809 7.8824 7.88228C7.33821 8.42649 6.91089 9.06029 6.61238 9.76609C6.30321 10.497 6.14648 11.2732 6.14648 12.0732C6.14648 12.8732 6.30325 13.6494 6.61238 14.3803C6.91089 15.0861 7.33821 15.7199 7.8824 16.2641C8.42658 16.8083 9.06041 17.2356 9.76621 17.5341C10.4971 17.8433 11.2733 18 12.0733 18C12.8733 18 13.6495 17.8433 14.3804 17.5341C15.0862 17.2356 15.72 16.8083 16.2642 16.2641C16.8084 15.7199 17.2357 15.0861 17.5342 14.3803C17.8434 13.6494 18.0001 12.8732 18.0001 12.0732C18.0001 11.2732 17.8434 10.497 17.5342 9.76609ZM12.0733 17.3215C9.17935 17.3215 6.82497 14.9671 6.82497 12.0732C6.82497 9.17926 9.17935 6.82484 12.0733 6.82484C14.9673 6.82484 17.3217 9.17923 17.3217 12.0732C17.3217 14.9672 14.9672 17.3215 12.0733 17.3215Z"
                  fill="#2B2B2B"
                />
                <path
                  d="M5.13173 11.8008C5.14706 11.8028 5.16225 11.8038 5.17726 11.8038C5.34457 11.8038 5.49022 11.6801 5.51307 11.5096C5.538 11.324 5.40764 11.1532 5.22194 11.1283C2.63173 10.7808 0.678481 8.54467 0.678481 5.92686C0.678481 3.0329 3.03286 0.678517 5.92683 0.678517C8.60194 0.678517 10.844 2.68004 11.1421 5.3342C11.1616 5.50752 11.3084 5.63563 11.4788 5.63563C11.4914 5.63563 11.5042 5.63492 11.5171 5.63348C11.7033 5.61256 11.8373 5.44469 11.8163 5.2585C11.6548 3.82001 10.9706 2.49223 9.88975 1.51974C9.3571 1.04049 8.75019 0.665685 8.08588 0.405704C7.39812 0.136477 6.67168 0 5.92683 0C5.12684 0 4.35063 0.156762 3.61973 0.465891C2.91393 0.764404 2.28013 1.19173 1.73591 1.73591C1.19169 2.2801 0.764403 2.91393 0.465891 3.61973C0.156762 4.35063 0 5.12688 0 5.92683C0 6.66103 0.132715 7.37776 0.394454 8.05712C0.647263 8.71328 1.01229 9.31463 1.47931 9.84447C2.42462 10.9168 3.72175 11.6116 5.13173 11.8008Z"
                  fill="#2B2B2B"
                />
                <path
                  d="M5.64795 3.61198H6.20669C6.995 3.61198 7.66476 4.17463 7.79924 4.94979C7.83126 5.13439 8.00691 5.25811 8.19148 5.22604C8.37608 5.19402 8.49976 5.01841 8.46773 4.83381C8.37643 4.30755 8.10091 3.82637 7.69191 3.47885C7.27797 3.12718 6.75052 2.9335 6.20669 2.9335H5.64795C5.3383 2.9335 5.03771 2.99422 4.75456 3.11399C4.48126 3.22959 4.23586 3.39503 4.02521 3.60566C3.81455 3.81631 3.64914 4.0617 3.53355 4.33501C3.43968 4.55691 3.38209 4.78954 3.3616 5.02882H2.85415C2.6668 5.02882 2.51489 5.18069 2.51489 5.36808C2.51489 5.55546 2.66677 5.70733 2.85415 5.70733H3.35305V6.14637H2.85415C2.6668 6.14637 2.51489 6.29824 2.51489 6.48562C2.51489 6.67297 2.66677 6.82488 2.85415 6.82488H3.36156C3.38209 7.06419 3.43968 7.29682 3.53351 7.51873C3.64911 7.79203 3.81455 8.03742 4.02517 8.24808C4.23583 8.45874 4.48122 8.62415 4.75453 8.73974C5.03767 8.85952 5.33826 8.92023 5.64792 8.92023H6.20666C6.394 8.92023 6.54588 8.76836 6.54588 8.58101C6.54588 8.39366 6.394 8.24175 6.20662 8.24175H5.64788C4.82413 8.24175 4.14242 7.62237 4.04377 6.82488H5.64788C5.83526 6.82488 5.98714 6.67301 5.98714 6.48562C5.98714 6.29824 5.83526 6.14637 5.64788 6.14637H4.03147V5.70733H5.64788C5.83526 5.70733 5.98714 5.55546 5.98714 5.36808C5.98714 5.18073 5.83526 5.02882 5.64788 5.02882H4.04381C4.14249 4.23133 4.82421 3.61198 5.64795 3.61198Z"
                  fill="#2B2B2B"
                />
              </g>
              <defs>
                <clipPath id="clip0_56647_1566">
                  <rect width="18" height="18" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </span>
          <span className="currency__value">{selectedOption}</span>
        </button>
        <ul className="currency__options stack column">
          {options?.map((option) => (
            <li
              key={option}
              className="currency__option"
              onClick={() => handleOptionClick(option)}
            >
              {option}
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
};
